---
title: 대규모 데이터 처리의 어려운 점
author: 김기현
date: 2024-4-26
category: Chapter 2
layout: post
mermaid: true
---

# 메모리 내에서 계산할 수 없다
메모리 내에서 계산할 수 없다는 점이 어려운 점인 이유는 메모리에 올리지 않으면 기본적으로 디스크를 계속 읽어가면서 검색하게 되어 좀처럼 발견할 수 없는 상태가 되기 때문이다.
계산량이 늘어난다는 것도 이유이지만 이보다 더 문제인 것은 디스크를 읽고 있다는 점이다.

이전에 말했듯이 디스크는 메모리에 비해 상당히 느리다. 따라서 메모리에서 계산하지 않고 디스크에서 계산하는 것은 큰 문제이다.

> ##### TIP
> 대규모 데이터의 어려움은 메모리 내에서 계산할 수 없다는 점이다
> * 메모리 내에서 계산할 수 없게 되면 디스크에 있는 데이터를 검색할 필요가 없다
> * 하지만 디스크는 느리므로 I/O에 시간이 걸린다
> * 어떻게 대처할 것인가가 연구 대상이다
{: .block-tip }

# 메모리와 디스크의 속도차

10만~100만배 차이가 난다. 이러한 수치 감각을 가지고 있어야 한다.

> ##### TIP
>
> 메모리는 $10^5 ~ 10^6$배 이상 고속이다.
{: .block-tip }

# 디스크는 왜 늦을까
메모리는 전기적인 부품이고 디스크는 하드웨어적인 부품이다.
디스크가 데이터를 읽어내기 위해서는 원판이 회전해야 한다. 이는 물리적인 동작이 필요함을 의미하고 이 물리적인 구조가 탐색 속도에 영향을 준다.

## 탐색 속도에 영향을 주는 다양한 원인
* 데이터가 뿔뿔이 흩어져서 배치되어있다
* 원판이 돌아야 한다
* 헤드가 움직여야 한다

# OS 레벨에서의 연구
OS에서 디스크로 접근을 최소화하기 위한 다양한 노력이 있었다. 예시로 한 번 데이터를 읽을 때 4KB 정도를 한 번에 읽도록 되어있는 것이다.
이렇게 하면 1번의 디스크 회전으로 읽는 데이터 수를 많게 하고, 그 결과로 디스크의 회전 횟수를 최소화할 수 있게 된다.

하지만 결국 1회전 당 밀리초 단위이므로 역시 메모리와의 속도차를 피할 수는 없다.

# 전송 속도, 버스의 속도차
지금까지는 데이터를 읽는 속도가 느린 것에만 주목했지만 다른 중요한 점도 있다.
메모리나 디스크 모두 CPU와 버스로 연결되어 있다. 이 버스의 속도에서도 상당한 차이가 있다.

메모리에서 CPU로 전송하는 것이 디스크에서 CPU로 전송하는 속도의 100배가 빠르다. 데이터가 많아질 수록 디스크와 메모리의 차이도 나타나게 되므로 전송속도에서도 디스크는 늦어진다.

SSD는 물리적인 회전이 아니므로 탐색은 빠르지만 버스 속도가 병목되거나 그 밖에 구조에 기인하는 면이 있어서 역시 메모리 만큼의 속도는 나오지 않는다.

> 이와 같이 현대의 컴퓨터에서는 메모리와 디스크의 속도차를 생각하고 애플리케이션을 만들어야 한다.
> 이는 확장성을 생각할 때 매우 본질적이면서도 어려운 부분이다.

> ##### TIP
>
> 전송 속도에서도 100배 이상 차이가 난다
> * 메모리 : 7.5GB/s
> * 디스크 : 58MB/s
{: .block-tip }

